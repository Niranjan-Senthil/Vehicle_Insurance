<!-- Views/AdminVehicle/EditVehicle.cshtml -->
@model VehicleInsuranceProject.Repository.Models.Vehicle
@using VehicleInsuranceProject.Repository.Models;
@using Microsoft.AspNetCore.Mvc.Rendering; 

@{
    ViewData["Title"] = $"Admin - Edit Vehicle: {Model?.registrationNumber}";
    Layout = "_Layout"; // IMPORTANT: Use your Admin Layout
}

@section Head {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* Basic styles for the dashboard elements, consider moving to site.css or a dedicated admin.css */
        .dashboard-container {
            padding: 30px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        .card { border: none; border-radius: 8px; }
        .form-label { font-weight: 500; }
        .btn-primary { background-color: #007bff; border-color: #007bff; }
        .btn-secondary { background-color: #6c757d; border-color: #6c757d; }
    </style>
}

<div class="container dashboard-container">
    <h2 class="mb-4"><i class="bi bi-pencil-square me-2"></i> @ViewData["Title"]</h2>
    <p>Owner: @ViewBag.CustomerName (ID: @ViewBag.CustomerId)</p>

    @* Display Validation Summary *@
    @* <div class="alert alert-danger" role="alert"> *@
    @*     @Html.ValidationSummary(true) *@
    @* </div> *@

    <div class="card shadow-sm p-4">
        <form action="@Url.Action("EditVehicle", "AdminVehicle")" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="vehicleId" value="@Model.vehicleId" />
            <input type="hidden" name="CustomerId" value="@Model.CustomerId" /> @* Keep CustomerId for redirect *@

            <div class="row g-3">
                <div class="col-md-6">
                    <label for="registrationNumber" class="form-label">Registration Number</label>
                    <input type="text" id="registrationNumber" name="registrationNumber" class="form-control" value="@Model.registrationNumber" required />
                    @Html.ValidationMessage("registrationNumber", "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6">
                    <label for="make" class="form-label">Make</label>
                    <input type="text" id="make" name="make" class="form-control" value="@Model.make" required />
                    @Html.ValidationMessage("make", "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6">
                    <label for="model" class="form-label">Model</label>
                    <input type="text" id="model" name="model" class="form-control" value="@Model.model" required />
                    @Html.ValidationMessage("model", "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6">
                    <label for="yearOfManufacture" class="form-label">Year of Manufacture</label>
                    <input type="number" id="yearOfManufacture" name="yearOfManufacture" class="form-control" value="@Model.yearOfManufacture" required min="1900" max="@(DateTime.Now.Year + 1)" />
                    @Html.ValidationMessage("yearOfManufacture", "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6">
                    <label for="vehicleType" class="form-label">Vehicle Type</label>
                    <select id="vehicleType" name="vehicleType" class="form-select" required asp-items="ViewBag.VehicleTypes">
                        <!-- Options are now rendered automatically by asp-items -->
                    </select>
                    @Html.ValidationMessage("vehicleType", "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="mt-4 d-flex justify-content-between">
                <a href="@Url.Action("ListCustomerVehicles", "AdminVehicle", new { customerId = ViewBag.CustomerId })" class="btn btn-secondary">
                    <i class="bi bi-arrow-left-circle me-2"></i> Back to Customer's Vehicles
                </a>
                <button type="submit" class="btn btn-primary btn-lg"><i class="bi bi-save me-2"></i> Save Changes</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
   
}
